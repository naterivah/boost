{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { ImagePreview } from \"./image.preview\";\nimport { environment } from \"../../environments/environment\";\nimport * as i0 from \"@angular/core\";\n\nfunction ImagePreviewComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 8);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 9)(3, \"text\", 10);\n    i0.ɵɵtext(4, \"Cover\");\n    i0.ɵɵelementEnd()()()();\n  }\n}\n\nfunction ImagePreviewComponent_label_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\", 2);\n    i0.ɵɵelement(1, \"img\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", ctx_r1.getUrlForDefaultCover(ctx_r1.defaultImage), i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ImagePreviewComponent_img_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 11);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r2.imgURL, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ImagePreviewComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵelement(1, \"div\", 13);\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let ImagePreviewComponent = /*#__PURE__*/(() => {\n  class ImagePreviewComponent {\n    constructor() {\n      this.emitter = new EventEmitter();\n    }\n\n    preview(files) {\n      if (files.length === 0) return;\n      this.loadingCover = true;\n      this.filename = files[0].name;\n      this.contentType = files[0].type;\n      let reader = new FileReader();\n      this.imagePath = files;\n      reader.readAsDataURL(files[0]);\n\n      reader.onload = _event => {\n        this.imgURL = reader.result;\n        let imagePreview = new ImagePreview();\n        imagePreview.contentType = this.contentType;\n        imagePreview.fileName = this.filename;\n        imagePreview.imagePath = this.imagePath;\n        imagePreview.imgURL = this.imgURL;\n        this.emitter.emit(imagePreview);\n        this.loadingCover = false;\n      };\n    }\n\n    ngOnInit() {}\n\n    getUrlForDefaultCover(defaultImage) {\n      return environment.backendUrl + '/upload/' + defaultImage;\n    }\n\n  }\n\n  ImagePreviewComponent.ɵfac = function ImagePreviewComponent_Factory(t) {\n    return new (t || ImagePreviewComponent)();\n  };\n\n  ImagePreviewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ImagePreviewComponent,\n    selectors: [[\"app-image-preview\"]],\n    inputs: {\n      defaultImage: \"defaultImage\"\n    },\n    outputs: {\n      emitter: \"emitter\"\n    },\n    decls: 9,\n    vars: 4,\n    consts: [[4, \"ngIf\"], [\"for\", \"cover\", \"class\", \"col-lg-12\", 4, \"ngIf\"], [\"for\", \"cover\", 1, \"col-lg-12\"], [\"width\", \"100%\", \"height\", \"100%\", 3, \"src\", 4, \"ngIf\"], [1, \"col-lg-12\"], [\"class\", \"progress\", 4, \"ngIf\"], [\"id\", \"cover\", \"type\", \"file\", 2, \"display\", \"none\", 3, \"change\"], [\"file\", \"\"], [\"for\", \"cover\", 1, \"btn\", \"btn-default\", \"w-100\", \"h-100\"], [\"width\", \"100%\", \"height\", \"100%\", 2, \"background-color\", \"rgb(243, 243, 243)\", \"border\", \"dashed 2px rgb(146, 146, 146)\"], [\"x\", \"40%\", \"y\", \"50%\", \"fill\", \"#999\", 2, \"font-weight\", \"bold\", \"text-align\", \"center\"], [\"width\", \"100%\", \"height\", \"100%\", 3, \"src\"], [1, \"progress\"], [\"role\", \"progressbar\", \"aria-valuenow\", \"100\", \"aria-valuemin\", \"0\", \"aria-valuemax\", \"100\", 1, \"progress-bar-animated\", \"progress-bar-striped\", \"bg-danger\", 2, \"width\", \"100%\"]],\n    template: function ImagePreviewComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r5 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"fieldset\");\n        i0.ɵɵtemplate(1, ImagePreviewComponent_div_1_Template, 5, 0, \"div\", 0);\n        i0.ɵɵtemplate(2, ImagePreviewComponent_label_2_Template, 2, 1, \"label\", 1);\n        i0.ɵɵelementStart(3, \"label\", 2);\n        i0.ɵɵtemplate(4, ImagePreviewComponent_img_4_Template, 1, 1, \"img\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵtemplate(6, ImagePreviewComponent_div_6_Template, 2, 0, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"input\", 6, 7);\n        i0.ɵɵlistener(\"change\", function ImagePreviewComponent_Template_input_change_7_listener() {\n          i0.ɵɵrestoreView(_r5);\n\n          const _r4 = i0.ɵɵreference(8);\n\n          return ctx.preview(_r4.files);\n        });\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.imgURL && !ctx.defaultImage);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.imgURL && ctx.defaultImage);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.imgURL);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.loadingCover);\n      }\n    },\n    styles: [\"\"]\n  });\n  return ImagePreviewComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}