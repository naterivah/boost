{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { faStar, faStarHalfAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { Star } from \"./star\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@fortawesome/angular-fontawesome\";\n\nfunction StarsComponent_span_0_fa_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"fa-icon\", 6);\n    i0.ɵɵlistener(\"mouseenter\", function StarsComponent_span_0_fa_icon_1_Template_fa_icon_mouseenter_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const i_r3 = i0.ɵɵnextContext().$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.updateRating(i_r3);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r3 = i0.ɵɵnextContext().$implicit;\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"icon\", ctx_r4.getIconFromCurr(i_r3, ctx_r4.inputStar.star));\n  }\n}\n\nfunction StarsComponent_span_0_fa_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"fa-icon\", 7);\n  }\n\n  if (rf & 2) {\n    const i_r3 = i0.ɵɵnextContext().$implicit;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"icon\", ctx_r5.getIcon(i_r3));\n  }\n}\n\nfunction StarsComponent_span_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 3);\n    i0.ɵɵtemplate(1, StarsComponent_span_0_fa_icon_1_Template, 1, 1, \"fa-icon\", 4);\n    i0.ɵɵtemplate(2, StarsComponent_span_0_fa_icon_2_Template, 1, 1, \"fa-icon\", 5);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.editable && ctx_r0.editMode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.editable || !ctx_r0.editMode);\n  }\n}\n\nfunction StarsComponent_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 8);\n    i0.ɵɵlistener(\"click\", function StarsComponent_a_1_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.editMode = !ctx_r11.editMode;\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Vote(\", ctx_r1.star.length, \")\");\n  }\n}\n\nfunction StarsComponent_a_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 9);\n    i0.ɵɵlistener(\"click\", function StarsComponent_a_2_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.emitVote();\n    });\n    i0.ɵɵtext(1, \"Submit\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function () {\n  return [1, 2, 3, 4, 5];\n};\n\nexport let StarsComponent = /*#__PURE__*/(() => {\n  class StarsComponent {\n    constructor() {\n      this.faStar = faStar;\n      this.faStarHalfAlt = faStarHalfAlt;\n      this.star = [];\n      this.updateStar = new EventEmitter();\n      this.inputStar = new Star();\n    }\n\n    ngOnInit() {}\n\n    getIcon(i) {\n      if (!this.star || !this.star.length) {\n        return ['far', 'star'];\n      }\n\n      let temp = this.star.map(s => s.star).reduce((previousValue, currentValue) => {\n        return previousValue + currentValue;\n      }) / this.star.length;\n      return this.getIconFromCurr(i, temp);\n    }\n\n    getIconFromCurr(i, curr) {\n      if (!curr) {\n        return ['far', 'star'];\n      }\n\n      let st = Math.round(curr * 2) / 2;\n\n      if (st < i) {\n        if (st + 0.5 === i) {\n          return ['fas', 'star-half-alt'];\n        } else {\n          return ['far', 'star'];\n        }\n      } else {\n        return ['fas', 'star'];\n      }\n    }\n\n    updateRating(i) {\n      let s = new Star();\n      s.star = i;\n      this.inputStar = s;\n    }\n\n    emitVote() {\n      if (!this.inputStar.star) {\n        this.inputStar.star = 0;\n      }\n\n      this.updateStar.emit(this.inputStar);\n      this.inputStar = new Star();\n      this.editMode = !this.editMode;\n    }\n\n  }\n\n  StarsComponent.ɵfac = function StarsComponent_Factory(t) {\n    return new (t || StarsComponent)();\n  };\n\n  StarsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: StarsComponent,\n    selectors: [[\"app-stars\"]],\n    inputs: {\n      star: \"star\",\n      editable: \"editable\"\n    },\n    outputs: {\n      updateStar: \"updateStar\"\n    },\n    decls: 3,\n    vars: 4,\n    consts: [[\"class\", \"text-warning\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"btn btn-link text-secondary clickable\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-link text-success clickable\", 3, \"click\", 4, \"ngIf\"], [1, \"text-warning\"], [3, \"icon\", \"mouseenter\", 4, \"ngIf\"], [3, \"icon\", 4, \"ngIf\"], [3, \"icon\", \"mouseenter\"], [3, \"icon\"], [1, \"btn\", \"btn-link\", \"text-secondary\", \"clickable\", 3, \"click\"], [1, \"btn\", \"btn-link\", \"text-success\", \"clickable\", 3, \"click\"]],\n    template: function StarsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, StarsComponent_span_0_Template, 3, 2, \"span\", 0);\n        i0.ɵɵtemplate(1, StarsComponent_a_1_Template, 2, 1, \"a\", 1);\n        i0.ɵɵtemplate(2, StarsComponent_a_2_Template, 2, 0, \"a\", 2);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(3, _c0));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.editable && !ctx.editMode);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.editable && ctx.editMode);\n      }\n    },\n    directives: [i1.NgForOf, i1.NgIf, i2.FaIconComponent],\n    styles: [\"\"]\n  });\n  return StarsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}