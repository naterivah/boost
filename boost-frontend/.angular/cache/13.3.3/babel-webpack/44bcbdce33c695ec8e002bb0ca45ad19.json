{"ast":null,"code":"import { NavigationEnd } from '@angular/router';\nimport { faBook, faFileAudio, faHome, faUser, faVolumeUp } from \"@fortawesome/free-solid-svg-icons\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/authenticationservice\";\nimport * as i2 from \"@angular/router\";\n\nfunction NavbarComponent_li_5_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 9);\n    i0.ɵɵelement(1, \"fa-icon\", 10);\n    i0.ɵɵelementStart(2, \"span\", 11);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const m_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"routerLink\", m_r2.route);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", m_r2.icon);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u00A0\", m_r2.label, \"\");\n  }\n}\n\nfunction NavbarComponent_li_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 7);\n    i0.ɵɵlistener(\"click\", function NavbarComponent_li_5_Template_li_click_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const m_r2 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      $event.preventDefault();\n      ctx_r5.click(m_r2);\n      return m_r2.selected = true;\n    });\n    i0.ɵɵtemplate(1, NavbarComponent_li_5_a_1_Template, 4, 3, \"a\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const m_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", \"nav-item \" + (m_r2.selected ? \"active\" : \"\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.hasRole(m_r2.role));\n  }\n}\n\nfunction NavbarComponent_li_6_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 14);\n    i0.ɵɵelement(1, \"fa-icon\", 15);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const link_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"href\", link_r7.route, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", link_r7.icon);\n  }\n}\n\nfunction NavbarComponent_li_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 12);\n    i0.ɵɵtemplate(1, NavbarComponent_li_6_a_1_Template, 2, 2, \"a\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const link_r7 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.hasRole(link_r7.role));\n  }\n}\n\nexport let NavbarComponent = /*#__PURE__*/(() => {\n  class NavbarComponent {\n    constructor(authenticationService, router, actRoute) {\n      this.authenticationService = authenticationService;\n      this.router = router;\n      this.actRoute = actRoute;\n      this.toggleNavbarClass = false;\n      this.faHome = faHome;\n      this.faFileAudio = faFileAudio;\n      this.faVolumeUp = faVolumeUp;\n    }\n\n    ngOnInit() {\n      this.createMenu();\n      this.createExternalLink();\n      this.setupRoute();\n    }\n\n    createMenu() {\n      this.menu = [{\n        role: ['ANONYMOUS', 'USER', 'ADMIN', 'CONTRIBUTOR'],\n        route: '/',\n        label: 'Home',\n        selected: false,\n        icon: this.faHome\n      }, {\n        role: ['ADMIN', 'USER', 'ANONYMOUS', 'CONTRIBUTOR'],\n        route: '/books',\n        label: 'Discover',\n        selected: false,\n        icon: faVolumeUp\n      }, {\n        role: ['ADMIN', 'USER', 'CONTRIBUTOR'],\n        route: '/my-books',\n        label: 'My Content',\n        selected: false,\n        icon: faBook\n      }, {\n        role: ['ADMIN', 'USER', 'CONTRIBUTOR'],\n        route: '/user-profile',\n        label: 'Profile',\n        selected: false,\n        icon: faUser\n      }];\n    }\n\n    setupRoute() {\n      let defaultMenu = {\n        role: ['ANONYMOUS', 'USER', 'ADMIN'],\n        route: '/',\n        label: 'Home',\n        selected: true,\n        icon: this.faHome\n      };\n      this.router.events.subscribe(e => {\n        this.currentMenu = defaultMenu;\n\n        if (e instanceof NavigationEnd) {\n          this.menu.forEach(menu => menu.selected = false);\n          let url = e.url;\n          const currentMenuList = this.menu.filter(r => r.route === url);\n\n          if (currentMenuList && currentMenuList.length > 0) {\n            let m = currentMenuList[0];\n            m.selected = true;\n            this.currentMenu = m;\n          }\n        }\n      });\n    }\n\n    click(item) {\n      this.menu.forEach(x => x.selected = false);\n      this.currentMenu = item;\n      this.currentMenu.selected = true;\n    }\n\n    toggleNavbar() {\n      this.toggleNavbarClass = !this.toggleNavbarClass;\n    }\n\n    toggleNavbarShow() {\n      if (this.toggleNavbarClass) {\n        return 'collapse navbar-collapse show ';\n      }\n\n      return 'collapse navbar-collapse';\n    }\n\n    hasRole(expected) {\n      return this.authenticationService.hasRole(expected);\n    }\n\n    createExternalLink() {\n      this.externalLink = [// {role: ['ADMIN'], route: '/proxy/aggregator/management', label: 'Management'},\n        //{role: ['ADMIN'], route: '/proxy/metrics/aggregator', label: 'Metrics'},\n        //{role: ['ADMIN'], route: '/proxy/robot/', label: 'Robot'}\n      ];\n    }\n\n    isLoggedIn() {\n      return this.authenticationService.isLoggedIn();\n    }\n\n  }\n\n  NavbarComponent.ɵfac = function NavbarComponent_Factory(t) {\n    return new (t || NavbarComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n\n  NavbarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NavbarComponent,\n    selectors: [[\"app-navbar\"]],\n    decls: 8,\n    vars: 3,\n    consts: [[1, \"navbar\", \"navbar-expand-lg\", \"navbar-light\", \"bg-light\"], [\"type\", \"button\", 1, \"navbar-toggler\", \"pb-2\", 3, \"click\"], [1, \"navbar-toggler-icon\"], [\"id\", \"navbarTogglerDemo01\", 3, \"ngClass\"], [1, \"navbar-nav\", \"mr-auto\", \"pt-1\"], [3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"nav-item\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngClass\", \"click\"], [\"class\", \"nav-link\", 3, \"routerLink\", 4, \"ngIf\"], [1, \"nav-link\", 3, \"routerLink\"], [1, \"\", 3, \"icon\"], [1, \"text-uppercase\"], [1, \"nav-item\"], [\"target\", \"_blank\", \"rel\", \"noopener noreferrer\", \"class\", \"nav-link\", 3, \"href\", 4, \"ngIf\"], [\"target\", \"_blank\", \"rel\", \"noopener noreferrer\", 1, \"nav-link\", 3, \"href\"], [3, \"icon\"]],\n    template: function NavbarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"nav\", 0)(1, \"button\", 1);\n        i0.ɵɵlistener(\"click\", function NavbarComponent_Template_button_click_1_listener() {\n          return ctx.toggleNavbar();\n        });\n        i0.ɵɵelement(2, \"span\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 3)(4, \"ul\", 4);\n        i0.ɵɵtemplate(5, NavbarComponent_li_5_Template, 2, 2, \"li\", 5);\n        i0.ɵɵtemplate(6, NavbarComponent_li_6_Template, 2, 1, \"li\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"app-login\");\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngClass\", ctx.toggleNavbarShow());\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.menu);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.externalLink);\n      }\n    },\n    styles: [\".bg-grey[_ngcontent-%COMP%]{background-color:#789}\"]\n  });\n  return NavbarComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}