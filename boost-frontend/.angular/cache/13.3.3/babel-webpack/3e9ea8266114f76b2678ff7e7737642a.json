{"ast":null,"code":"import { faPlus, faSave, faTimes, faTrash } from \"@fortawesome/free-solid-svg-icons\";\nimport { AudioPlayerComponent } from \"../audio-player/audio-player.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/chapter.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../service/authenticationservice\";\n\nfunction ChaptersComponent_app_chapter_form_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-chapter-form\", 4);\n    i0.ɵɵlistener(\"emitter\", function ChaptersComponent_app_chapter_form_1_Template_app_chapter_form_emitter_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.refreshChapterList($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"editMode\", ctx_r0.editMode)(\"bookId\", ctx_r0.bookId);\n  }\n}\n\nfunction ChaptersComponent_ul_2_li_6_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function ChaptersComponent_ul_2_li_6_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ch_r6 = i0.ɵɵnextContext().$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.deleteChapter(ch_r6);\n    });\n    i0.ɵɵelement(1, \"fa-icon\", 15);\n    i0.ɵɵtext(2, \"\\u00A0Remove \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"icon\", ctx_r7.faTrash);\n  }\n}\n\nfunction ChaptersComponent_ul_2_li_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 9);\n    i0.ɵɵelement(1, \"app-chapter-detail\", 10)(2, \"div\", 11);\n    i0.ɵɵelementStart(3, \"div\", 12);\n    i0.ɵɵtemplate(4, ChaptersComponent_ul_2_li_6_button_4_Template, 3, 1, \"button\", 13);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ch_r6 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"editMode\", ctx_r5.editMode)(\"id\", ch_r6.id)(\"chapter\", ch_r6);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.editMode);\n  }\n}\n\nconst _c0 = function (a0, a1, a2) {\n  return {\n    itemsPerPage: a0,\n    currentPage: a1,\n    totalItems: a2\n  };\n};\n\nfunction ChaptersComponent_ul_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 5)(1, \"li\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementStart(3, \"h3\")(4, \"span\", 7);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(6, ChaptersComponent_ul_2_li_6_Template, 5, 4, \"li\", 8);\n    i0.ɵɵpipe(7, \"paginate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Track\", ctx_r1.chapters.totalElements > 1 ? \"s\" : \"\", \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.chapters.totalElements);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(7, 3, ctx_r1.chapters.content, i0.ɵɵpureFunction3(6, _c0, ctx_r1.chapters.size, ctx_r1.chapters.number + 1, ctx_r1.chapters.totalElements)));\n  }\n}\n\nfunction ChaptersComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"div\", 17)(2, \"pagination-controls\", 18);\n    i0.ɵɵlistener(\"pageChange\", function ChaptersComponent_div_3_Template_pagination_controls_pageChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.getChapters($event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nexport let ChaptersComponent = /*#__PURE__*/(() => {\n  class ChaptersComponent {\n    constructor(chapterService, router, authenticationService) {\n      this.chapterService = chapterService;\n      this.router = router;\n      this.authenticationService = authenticationService;\n      this.faPlus = faPlus;\n      this.faTimes = faTimes;\n      this.faTrash = faTrash;\n      this.faSave = faSave;\n    }\n\n    ngOnInit() {\n      if (this.bookId) {\n        this.getChapters();\n      }\n    }\n\n    getChapters(event = 1) {\n      this.chapterService.getChapters(event, this.bookId, datas => {\n        this.chapters = datas;\n      });\n    }\n\n    deleteChapter(ch) {\n      let next = datas => {\n        this.authenticationService.autoLogin();\n        let currentChapterUploadId = (datas.currentChapter || {\n          upload: {}\n        }).upload.id;\n        AudioPlayerComponent.reloadCurrentPlayer(currentChapterUploadId, (datas.currentChapter || {}).title);\n        this.chapters = this.chapters.content.filter(c => c.id !== ch.id);\n        alert(datas.message);\n        this.getChapters();\n      };\n\n      this.chapterService.deleteChapter(ch, next);\n    }\n\n    refreshChapterList($event) {\n      setTimeout(() => {\n        this.getChapters();\n      }, 1000);\n    }\n\n  }\n\n  ChaptersComponent.ɵfac = function ChaptersComponent_Factory(t) {\n    return new (t || ChaptersComponent)(i0.ɵɵdirectiveInject(i1.ChapterService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AuthenticationService));\n  };\n\n  ChaptersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ChaptersComponent,\n    selectors: [[\"app-chapters\"]],\n    inputs: {\n      editMode: \"editMode\",\n      bookId: \"bookId\"\n    },\n    decls: 4,\n    vars: 3,\n    consts: [[1, \"col-12\", \"mb-1\"], [3, \"editMode\", \"bookId\", \"emitter\", 4, \"ngIf\"], [\"class\", \"list-group\", 4, \"ngIf\"], [\"class\", \"text-center container mt-2 mr-1 mb-3 pb-1 \", 4, \"ngIf\"], [3, \"editMode\", \"bookId\", \"emitter\"], [1, \"list-group\"], [\"aria-disabled\", \"true\", 1, \"list-group-item\", \"d-flex\", \"justify-content-between\", \"align-items-center\", \"text-uppercase\", \"disabled\", \"border-right-0\", \"border-left-0\"], [1, \"badge\", \"badge-secondary\", \"badge-pill\", \"lead\"], [\"class\", \"list-group-item border-0\", 4, \"ngFor\", \"ngForOf\"], [1, \"list-group-item\", \"border-0\"], [3, \"editMode\", \"id\", \"chapter\"], [1, \"clearfix\"], [1, \"col-12\", \"mt-2\"], [\"class\", \"btn btn-sm btn-outline-danger text-uppercase  float-right\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-sm\", \"btn-outline-danger\", \"text-uppercase\", \"float-right\", 3, \"click\"], [3, \"icon\"], [1, \"text-center\", \"container\", \"mt-2\", \"mr-1\", \"mb-3\", \"pb-1\"], [1, \"text-wrap\"], [\"previousLabel\", \"\", \"autoHide\", \"true\", \"nextLabel\", \"\", 1, \"my-pagination\", 3, \"pageChange\"]],\n    template: function ChaptersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, ChaptersComponent_app_chapter_form_1_Template, 1, 2, \"app-chapter-form\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(2, ChaptersComponent_ul_2_Template, 8, 10, \"ul\", 2);\n        i0.ɵɵtemplate(3, ChaptersComponent_div_3_Template, 3, 0, \"div\", 3);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.editMode);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.chapters);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.chapters && !ctx.chapters.empty && ctx.chapters.totalPages > 1);\n      }\n    },\n    styles: [\"\"]\n  });\n  return ChaptersComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}